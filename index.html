<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ảnh Viện Cưới NVT Group</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fff0f5; margin: 0; padding: 0; }
    nav { background: #ffb6c1; padding: 10px; display: none; justify-content: space-around; position: sticky; top: 0; z-index: 10; }
    nav a { text-decoration: none; color: #333; font-weight: bold; }
    .section { padding: 20px; display: none; }
    .active { display: block; }
    input, textarea, select { width: 100%; padding: 8px; margin: 5px 0; border-radius: 4px; border: 1px solid #ccc; }
    button { padding: 10px 20px; background: #ff69b4; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
    .card { background: white; border-radius: 10px; padding: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .product, .rental { border: 1px solid #ddd; padding: 10px; border-radius: 8px; background: #fff; margin-bottom: 10px; }
    .center-text { text-align: center; font-style: italic; color: #d63384; font-size: 1.5em; margin-top: 20px; }
    .hidden { display: none; }
  </style>
</head>
<body>

<!-- Chưa đăng nhập -->
<div class="section active" id="welcome">
  <div class="center-text">Ảnh Viện Áo Cưới Nguyễn Thành - NVT Group</div>
  <div class="card">
    <h2>Đăng Nhập</h2>
    <input type="text" id="login-user" placeholder="Tên đăng nhập">
    <input type="password" id="login-pass" placeholder="Mật khẩu">
    <button onclick="dangNhap()">Đăng nhập</button>
  </div>
  <div class="card">
    <h2>Đăng Ký</h2>
    <input type="text" id="dk-user" placeholder="Tên đăng nhập">
    <input type="password" id="dk-pass" placeholder="Mật khẩu">
    <input type="text" id="dk-ten" placeholder="Tên thành viên">
    <input type="text" id="dk-bank" placeholder="Số tài khoản ngân hàng">
    <button onclick="dangKy()">Đăng ký</button>
  </div>
</div>

<!-- Sau khi đăng nhập -->
<nav id="main-nav">
  <a href="#" onclick="hien('home')">🏠 Trang chủ</a>
  <a href="#" onclick="hien('tao-thiep')">💌 Thiệp Cưới</a>
  <a href="#" onclick="hien('mua-qua')">🎁 Mua Quà</a>
  <a href="#" onclick="hien('thue-do')">🧥 Thuê Đồ</a>
  <a href="#" onclick="hien('don-hang')">📦 Đơn Hàng</a>
  <a href="#" onclick="hien('gui-tien')">💸 Gửi Tiền Mừng</a>
  <a href="#" onclick="hien('ho-so')">👤 Hồ Sơ</a>
</nav>

<div class="section" id="home">
  <div class="card">
    <h2>Chào mừng <span id="user-display"></span>!</h2>
    <p>Chúc bạn có trải nghiệm tốt!</p>
  </div>
</div>

<div class="section" id="tao-thiep">
  <div class="card">
    <h2>Tạo Thiệp Cưới</h2>
    <input id="chu-tren" placeholder="Thiệp Mời">
    <input id="ten-nam" placeholder="Chú Rẻ">
    <input id="ten-nu" placeholder="Cô Dâu">
    <input id="ten-khach-moi" placeholder="Tên khách mời">
    <select id="font-style">
      <option value="normal">Bình thường</option>
      <option value="bold">Đậm</option>
      <option value="italic">Nghiêng</option>
    </select>
    <input type="color" id="mau-chu">
    <button onclick="taoThiep()">Tạo Thiệp</button>
    <div id="preview-thiep" style="margin-top:20px;"></div>
    <button onclick="taiAnh()">Lưu Hình Thiệp</button>
  </div>
</div>

<div class="section" id="mua-qua">
  <div class="card">
    <h2>Quản Lý Sản Phẩm</h2>
    <input type="file" onchange="taiAnhSanPham(event)">
    <input id="ten-sp" placeholder="Tên sản phẩm">
    <input id="gia-sp" placeholder="Giá">
    <button onclick="themSanPham()">Thêm</button>
    <div id="danh-sach-sp"></div>
  </div>
</div>

<div class="section" id="thue-do">
  <div class="card">
    <h2>Thuê Đồ</h2>
    <p>Chức năng tương tự "Mua Quà".</p>
  </div>
</div>

<div class="section" id="don-hang">
  <div class="card">
    <h2>Đơn Hàng</h2>
    <div id="don-hang-view"></div>
  </div>
</div>

<div class="section" id="gui-tien">
  <div class="card">
    <h2>Gửi Tiền Mừng</h2>
    <input placeholder="Tên người gửi">
    <input placeholder="Số tiền">
    <input placeholder="Ngân hàng / Mã giao dịch">
    <button>Gửi</button>
  </div>
</div>

<div class="section" id="ho-so">
  <div class="card">
    <h2>Hồ Sơ Cá Nhân</h2>
    <p><strong>Tên:</strong> <span id="ho-ten"></span></p>
    <p><strong>Số TK Ngân Hàng:</strong> <span id="stk"></span></p>
  </div>
</div>

<script>
let currentUser = null;
let admin = { user: 'anhthanh', pass: '123' };
let users = JSON.parse(localStorage.getItem('users') || '[]');

function hien(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function dangNhap() {
  const u = document.getElementById('login-user').value;
  const p = document.getElementById('login-pass').value;
  if ((u === admin.user && p === admin.pass) || users.find(u2 => u2.user === u && u2.pass === p)) {
    currentUser = (u === admin.user) ? { user: u, ten: 'Admin', stk: 'N/A', admin: true } : users.find(u2 => u2.user === u);
    document.getElementById('main-nav').style.display = 'flex';
    document.getElementById('user-display').innerText = currentUser.ten;
    document.getElementById('ho-ten').innerText = currentUser.ten;
    document.getElementById('stk').innerText = currentUser.stk;
    hien('home');
    document.getElementById('welcome').style.display = 'none';
  } else {
    alert('Sai thông tin đăng nhập.');
  }
}

function dangKy() {
  const u = document.getElementById('dk-user').value;
  const p = document.getElementById('dk-pass').value;
  const ten = document.getElementById('dk-ten').value;
  const stk = document.getElementById('dk-bank').value;
  if (u && p && ten && stk) {
    users.push({ user: u, pass: p, ten, stk });
    localStorage.setItem('users', JSON.stringify(users));
    alert('Đăng ký thành công.');
  } else {
    alert('Điền đầy đủ thông tin.');
  }
}

function taoThiep() {
  const chu = document.getElementById('chu-tren').value;
  const nam = document.getElementById('ten-nam').value;
  const nu = document.getElementById('ten-nu').value;
  const khach = document.getElementById('ten-khach-moi').value;
  const mau = document.getElementById('mau-chu').value;
  const style = document.getElementById('font-style').value;
  document.getElementById('preview-thiep').innerHTML = `
    <div style="border:2px dashed #ccc; padding:20px; text-align:center; color:${mau}; font-style:${style};">
      <h2>${chu}</h2>
      <p>${nam} & ❤️ ${nu}</p>
      <p>Kính mời: <strong>${khach}</strong></p>
    </div>`;
}

function taiAnh() {
  alert('Chức năng lưu ảnh sẽ được bổ sung bằng thư viện html2canvas hoặc tương tự.');
}

let dsSP = [];
function taiAnhSanPham(evt) {
  const reader = new FileReader();
  reader.onload = () => localStorage.setItem('sp-img', reader.result);
  reader.readAsDataURL(evt.target.files[0]);
}
function themSanPham() {
  const ten = document.getElementById('ten-sp').value;
  const gia = document.getElementById('gia-sp').value;
  const img = localStorage.getItem('sp-img');
  if (ten && gia && img) {
    dsSP.push({ ten, gia, img });
    hienThiSanPham();
  }
}
function hienThiSanPham() {
  const khung = document.getElementById('danh-sach-sp');
  khung.innerHTML = '';
  dsSP.forEach((sp, i) => {
    khung.innerHTML += `
      <div class='product'>
        <img src="${sp.img}" width="100%">
        <p>${sp.ten} - ${sp.gia}đ</p>
        ${currentUser.admin ? `<button onclick="xoaSP(${i})">Xóa</button>` : ''}
      </div>`;
  });
}
function xoaSP(i) {
  dsSP.splice(i, 1);
  hienThiSanPham();
}
</script>
</body>
</html>
