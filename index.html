<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thiá»‡p CÆ°á»›i & Shop Mini</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fff0f5; margin: 0; padding: 0; }
    header, nav { background: #ffb6c1; padding: 10px; text-align: center; }
    nav a { margin: 0 10px; color: #fff; text-decoration: none; font-weight: bold; }
    .hidden { display: none; }
    .container { padding: 20px; }
    input, textarea, select { width: 100%; padding: 8px; margin: 10px 0; border-radius: 4px; border: 1px solid #ccc; }
    button { background: #ff69b4; color: #fff; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
    .product, .invite, .order { background: #fff; border-radius: 10px; padding: 15px; margin: 10px 0; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .admin-controls { background: #f9f9f9; padding: 10px; margin-top: 20px; border: 1px dashed #ccc; }
    img { max-width: 100px; border-radius: 6px; }
  </style>
</head>
<body>
  <header><h1>Thiá»‡p CÆ°á»›i & Shop Mini</h1></header>
  <nav id="nav" class="hidden">
    <a href="#" onclick="showPage('wedding')">Thiá»‡p CÆ°á»›i</a>
    <a href="#" onclick="showPage('gift')">Mua QuÃ </a>
    <a href="#" onclick="showPage('rent')">ThuÃª Äá»“</a>
    <a href="#" onclick="showPage('orders')">ÄÆ¡n HÃ ng</a>
  </nav>

  <div class="container" id="login-page">
    <h2>ÄÄƒng nháº­p</h2>
    <input id="login-user" placeholder="TÃªn Ä‘Äƒng nháº­p">
    <input id="login-pass" type="password" placeholder="Máº­t kháº©u">
    <button onclick="login()">ÄÄƒng nháº­p</button>
    <p>Báº¡n chÆ°a cÃ³ tÃ i khoáº£n? <a href="#" onclick="toggleForm('register')">ÄÄƒng kÃ½</a></p>
  </div>

  <div class="container hidden" id="register-page">
    <h2>ÄÄƒng kÃ½</h2>
    <input id="reg-user" placeholder="TÃªn Ä‘Äƒng nháº­p">
    <input id="reg-pass" type="password" placeholder="Máº­t kháº©u">
    <input id="reg-pass2" type="password" placeholder="Nháº­p láº¡i máº­t kháº©u">
    <input id="reg-email" placeholder="Email">
    <button onclick="register()">ÄÄƒng kÃ½</button>
    <p><a href="#" onclick="toggleForm('login')">ÄÃ£ cÃ³ tÃ i khoáº£n</a></p>
  </div>

  <div class="container hidden" id="wedding">
    <h2>Táº¡o Thiá»‡p CÆ°á»›i</h2>
    <input id="bride" placeholder="TÃªn cÃ´ dÃ¢u">
    <input id="groom" placeholder="TÃªn chÃº rá»ƒ">
    <input id="guest" placeholder="TÃªn khÃ¡ch má»i">
    <input id="place" placeholder="Äá»‹a Ä‘iá»ƒm tá»• chá»©c">
    <input id="time" placeholder="Thá»i gian">
    <textarea id="message" placeholder="Lá»i má»i..."></textarea>
    <select id="fontStyle">
      <option value="normal">BÃ¬nh thÆ°á»ng</option>
      <option value="italic">NghiÃªng</option>
      <option value="bold">Äáº­m</option>
    </select>
    <input type="color" id="fontColor">
    <button onclick="generateInvite()">Táº¡o Thiá»‡p</button>
    <div id="invite-output" class="invite"></div>
  </div>

  <div class="container hidden" id="gift">
    <h2>Danh sÃ¡ch quÃ  táº·ng</h2>
    <div id="gift-list"></div>
    <div class="admin-controls hidden" id="gift-admin">
      <h3>ThÃªm sáº£n pháº©m</h3>
      <input id="gift-title" placeholder="TÃªn sáº£n pháº©m">
      <input id="gift-price" placeholder="GiÃ¡">
      <textarea id="gift-desc" placeholder="MÃ´ táº£"></textarea>
      <input type="file" id="gift-img">
      <button onclick="addGift()">ÄÄƒng</button>
    </div>
  </div>

  <div class="container hidden" id="rent">
    <h2>Äá»“ cho thuÃª</h2>
    <div id="rent-list"></div>
    <div class="admin-controls hidden" id="rent-admin">
      <h3>ThÃªm Ä‘á»“ cho thuÃª</h3>
      <input id="rent-title" placeholder="TÃªn Ä‘á»“">
      <input id="rent-price" placeholder="GiÃ¡ thuÃª">
      <textarea id="rent-desc" placeholder="MÃ´ táº£"></textarea>
      <input type="file" id="rent-img">
      <button onclick="addRent()">ÄÄƒng</button>
    </div>
  </div>

  <div class="container hidden" id="orders">
    <h2>ÄÆ¡n hÃ ng</h2>
    <div id="order-list"></div>
  </div>

  <script>
    let currentUser = null;
    let users = JSON.parse(localStorage.getItem('users') || '{}');
    let gifts = JSON.parse(localStorage.getItem('gifts') || '[]');
    let rents = JSON.parse(localStorage.getItem('rents') || '[]');
    let orders = JSON.parse(localStorage.getItem('orders') || '[]');

    function toggleForm(type) {
      document.getElementById('login-page').classList.toggle('hidden', type !== 'login');
      document.getElementById('register-page').classList.toggle('hidden', type !== 'register');
    }

    function register() {
      const u = document.getElementById('reg-user').value;
      const p = document.getElementById('reg-pass').value;
      const p2 = document.getElementById('reg-pass2').value;
      const e = document.getElementById('reg-email').value;
      if (!u || !p || p !== p2) return alert('Vui lÃ²ng nháº­p Ä‘Ãºng thÃ´ng tin.');
      users[u] = { password: p, email: e };
      localStorage.setItem('users', JSON.stringify(users));
      alert('ÄÄƒng kÃ½ thÃ nh cÃ´ng');
      toggleForm('login');
    }

    function login() {
      const u = document.getElementById('login-user').value;
      const p = document.getElementById('login-pass').value;
      if (!users[u] || users[u].password !== p) return alert('Sai thÃ´ng tin Ä‘Äƒng nháº­p');
      currentUser = u;
      document.getElementById('nav').classList.remove('hidden');
      document.getElementById('login-page').classList.add('hidden');
      loadGifts(); loadRents(); loadOrders();
    }

    function showPage(page) {
      ['wedding','gift','rent','orders'].forEach(p => document.getElementById(p).classList.add('hidden'));
      document.getElementById(page).classList.remove('hidden');
      document.getElementById('gift-admin').classList.toggle('hidden', currentUser !== 'anhthanh');
      document.getElementById('rent-admin').classList.toggle('hidden', currentUser !== 'anhthanh');
    }

    function generateInvite() {
      const b = document.getElementById('bride').value;
      const g = document.getElementById('groom').value;
      const guest = document.getElementById('guest').value;
      const p = document.getElementById('place').value;
      const t = document.getElementById('time').value;
      const msg = document.getElementById('message').value;
      const style = document.getElementById('fontStyle').value;
      const color = document.getElementById('fontColor').value;
      const html = `<div style="color:${color};font-weight:${style==='bold'?'bold':'normal'};font-style:${style==='italic'?'italic':'normal'}">
        <h3>ThÆ° má»i</h3>
        <p>ThÃ¢n má»i ${guest} Ä‘áº¿n dá»± lá»… cÆ°á»›i cá»§a ${b} & ${g}</p>
        <p>Thá»i gian: ${t}</p>
        <p>Äá»‹a Ä‘iá»ƒm: ${p}</p>
        <p>${msg}</p>
        <button onclick="shareInvite()">ğŸ“¤ Chia sáº»</button>
      </div>`;
      document.getElementById('invite-output').innerHTML = html;
    }

    function shareInvite() {
      alert('TÃ­nh nÄƒng chia sáº» Ä‘ang Ä‘Æ°á»£c phÃ¡t triá»ƒn');
    }

    function addGift() {
      const title = document.getElementById('gift-title').value;
      const price = document.getElementById('gift-price').value;
      const desc = document.getElementById('gift-desc').value;
      const img = document.getElementById('gift-img').files[0];
      const reader = new FileReader();
      reader.onload = () => {
        gifts.push({ title, price, desc, img: reader.result });
        localStorage.setItem('gifts', JSON.stringify(gifts));
        loadGifts();
      };
      if (img) reader.readAsDataURL(img);
    }

    function loadGifts() {
      const list = document.getElementById('gift-list');
      list.innerHTML = '';
      gifts.forEach((g, i) => {
        list.innerHTML += `<div class='product'>
          <img src='${g.img}'><h4>${g.title}</h4>
          <p>${g.price}Ä‘</p><p>${g.desc}</p>
          <button onclick='order("gift", ${i})'>Mua</button>
        </div>`;
      });
    }

    function addRent() {
      const title = document.getElementById('rent-title').value;
      const price = document.getElementById('rent-price').value;
      const desc = document.getElementById('rent-desc').value;
      const img = document.getElementById('rent-img').files[0];
      const reader = new FileReader();
      reader.onload = () => {
        rents.push({ title, price, desc, img: reader.result });
        localStorage.setItem('rents', JSON.stringify(rents));
        loadRents();
      };
      if (img) reader.readAsDataURL(img);
    }

    function loadRents() {
      const list = document.getElementById('rent-list');
      list.innerHTML = '';
      rents.forEach((g, i) => {
        list.innerHTML += `<div class='product'>
          <img src='${g.img}'><h4>${g.title}</h4>
          <p>${g.price}Ä‘</p><p>${g.desc}</p>
          <button onclick='order("rent", ${i})'>ThuÃª</button>
        </div>`;
      });
    }

    function order(type, i) {
      const info = prompt("Nháº­p tÃªn, Ä‘á»‹a chá»‰, sá»‘ Ä‘iá»‡n thoáº¡i (cÃ¡ch nhau báº±ng dáº¥u pháº©y)");
      if (!info) return;
      const [name, addr, phone] = info.split(',');
      const item = type === 'gift' ? gifts[i] : rents[i];
      orders.push({ user: currentUser, name, addr, phone, item, type, status: 'Chá» xÃ¡c nháº­n' });
      localStorage.setItem('orders', JSON.stringify(orders));
      alert('ÄÃ£ gá»­i Ä‘Æ¡n hÃ ng');
    }

    function loadOrders() {
      const list = document.getElementById('order-list');
      list.innerHTML = '';
      orders.forEach((o, i) => {
        if (currentUser === 'anhthanh' || currentUser === o.user) {
          list.innerHTML += `<div class='order'>
            <p><strong>${o.type.toUpperCase()}:</strong> ${o.item.title} (${o.item.price}Ä‘)</p>
            <p>NgÆ°á»i Ä‘áº·t: ${o.name} - ${o.phone} - ${o.addr}</p>
            <p>Tráº¡ng thÃ¡i: ${o.status}</p>
            ${currentUser==='anhthanh' && o.status==='Chá» xÃ¡c nháº­n' ? `<button onclick='confirmOrder(${i})'>XÃ¡c nháº­n</button>`:''}
          </div>`;
        }
      });
    }

    function confirmOrder(i) {
      orders[i].status = 'ÄÃ£ xÃ¡c nháº­n';
      localStorage.setItem('orders', JSON.stringify(orders));
      loadOrders();
    }
  </script>
</body>
</html>
